<html>
<head>
	<link rel="stylesheet" type="text/css" href="yo.css">
</head>
<body>
	<canvas id="mainframe"></canvas>
	<script src="sprite.js"></script>
	<script type="text/javascript">
		var blockWidth = 32;
		var blockHeight = 16;
		var FPS = 30;
		var gravity = 1.4;
	    window.addEventListener('resize', resizeCanvas, false);
	    function resizeCanvas() {
	            canvas.width = window.innerWidth;
	            canvas.height = window.innerHeight;
	            drawStuff(); 
	    }
	    var canvas = document.getElementById("mainframe");
	    var movingBlocks = new Array();
	    var landedBlocks = new Array();
	    var lastTime = new Date().getTime();
	    function drawStuff() {
	    	canvas.width = canvas.width; // clears the canvas
	    	currentTime = new Date().getTime();
	    	deltaSec = (currentTime - lastTime) / 1000;
	    	lastTime = currentTime;
	    	for (var i=0; i<movingBlocks.length; i++) {
	    		movingBlocks[i].update(deltaSec, i, movingBlocks, landedBlocks);
	    		movingBlocks[i].render();
	    	}
	    	for (var i=0; i<landedBlocks.length; i++) {
	    		if(landedBlocks[i] != undefined) {
	    			for (var j=0; j<landedBlocks[i].length; j++) {
	    				landedBlocks[i][j].render();
	    			}
	    		}
	    	}
	    }
	    function linear(t, color1, color2) {
	    	return Math.floor(color1 * (1 - t) + t * color2);
	    }
	    function randomColorUnit() {
	    	return Math.floor(Math.random() * 256);
	    }
	    setInterval(drawStuff, 1000 / FPS);
	    var color1Red = randomColorUnit();
	    var color1Green = randomColorUnit();
	    var color1Blue = randomColorUnit();
	    var color2Red = randomColorUnit();
	    var color2Green = randomColorUnit();
	    var color2Blue = randomColorUnit();
	    function addBlock() {
	    	var randomX = Math.random() * canvas.width;
	    	var initX = randomX - randomX % blockWidth;
	    	var red = linear(Math.random(), color1Red, color2Red);
			var green = linear(Math.random(), color1Green, color2Green);
			var blue = linear(Math.random(), color1Blue, color2Blue);
	    	movingBlocks.push(sprite({
			    context: canvas.getContext("2d"),
			    x: initX,
			    y: 0,
			    width: blockWidth,
			    height: blockHeight,
			    red: red,
			    green: green,
			    blue: blue
			}));
	    }
	    setInterval(addBlock, 1000);
	    resizeCanvas();
	</script>
</body>
</html>